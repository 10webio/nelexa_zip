checks:
    php: true

filter:
    paths: [ "src/*" ]
    excluded_paths: [ "vendor/*", "tests/*" ]

tools:
    external_code_coverage: false

build:
    environment:
        php:
            version: 8.0
            pecl_extensions:
                - zip
        mysql:         false
        node:          false
        postgresql:    false
        mongodb:       false
        elasticsearch: false
        redis:         false
        memcached:     false
        neo4j:         false
        rabbitmq:      false
    nodes:
        analysis:
            environment:
                php: 8.0
            tests:
                override:
                    - php-scrutinizer-run
    dependencies:
        before:
            - composer self-update
            - composer update --no-interaction --prefer-dist --no-progress
    tests:
        before:
            -
                command: composer test:coverage
                coverage:
                    file:   'build/logs/clover.xml'
                    format: 'clover'
